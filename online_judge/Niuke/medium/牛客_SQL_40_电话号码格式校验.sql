
/*
平台：牛客网
题号：40
题目： 电话号码格式校验
难度：中等


题目要求：
从 contacts 表中筛选出符合以下条件的电话号码：
1.必须是 10 位数字
2.第一位不能是 0
3.格式可以是：连续的 10 位数字 或 以-分隔的格式（如 123-456-7890）
4.按 id 升序输出所有字段


特殊要求：
1.多种格式处理：需要同时处理两种格式的电话号码
2.正则表达式：需要使用正则表达式进行模式匹配
3.数据清洗：可能需要去除分隔符后再验证
4.数字验证：验证字符串是否只包含数字（去除分隔符后）

解题思路：
1.统一处理格式：先将所有可能的分隔符去掉，得到纯数字字符串
2.验证长度：确保去掉分隔符后正好是 10 位数字
3.验证首字符：确保第一位不是 '0'
4.验证格式：确保原始格式是合法的
5.要么是纯 10 位数字
6.要么是按 3-3-4 格式用 '-' 分隔
*/

-- ========== 我的解答 ==========
select 
  * 
from 
  contacts 
where 
  phone_number regexp '^[1-9][0-9]{2}-?[0-9]{3}-?[0-9]{4}$';
/*
执行结果：通过
提交时间：2026.2.2

关键学习点：

1. REGEXP 正则表达式

易错点：

1. 只检查格式，不检查内容
2. 正则表达式边界问题
3.不考虑其他分隔符


学习收获：

1.正则表达式应用：学会在 SQL 中使用正则表达式验证数据格式
2.数据清洗：掌握从非标准化数据中提取有效信息的方法